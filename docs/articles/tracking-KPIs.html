<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>KPI Tracking • ghtrackr</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="KPI Tracking">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ghtrackr</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../CREDITS.html">Credits</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/emilyriederer/ghtrackr/">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>KPI Tracking</h1>
                        <h4 class="author">Emily Riederer</h4>
            
            <h4 class="date">2019-01-01</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/emilyriederer/ghtrackr/blob/master/vignettes/tracking-KPIs.Rmd"><code>vignettes/tracking-KPIs.Rmd</code></a></small>
      <div class="hidden name"><code>tracking-KPIs.Rmd</code></div>

    </div>

    
    
<p>The power of the <code>post</code> functions generally comes not when filing one-off issues but when automating a bulk upload of issues. One case where this could be useful is when using GitHub as a management platform for business metrics tracking.</p>
<div id="tracking-kpis" class="section level2">
<h2 class="hasAnchor">
<a href="#tracking-kpis" class="anchor"></a>Tracking KPIs</h2>
<p>As a toy example, suppose an analyst is already using R to report quarterly sales data and look for anomalous performance. After some wrangling, their data might look something like this.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(sales_data)
<span class="co">#&gt;      region   month sales_amt sales_expected</span>
<span class="co">#&gt; 1 Northeast October      3144           5000</span>
<span class="co">#&gt; 2 Southeast October      5394           5000</span>
<span class="co">#&gt; 3   Midwest October      4204           4000</span>
<span class="co">#&gt; 4 Southwest October      7442           4000</span>
<span class="co">#&gt; 5 Northwest October      2470           2000</span></code></pre></div>
<p>Assume they have some criterion to determine how much of a difference between their KPIs and expectations should warrant further investigation. For simplicity here, we will simply use a deviation of more than 25%. In this case, that yield two regions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">deviations &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(sales_data, <span class="kw">abs</span>(sales_amt <span class="op">-</span><span class="st"> </span>sales_expected) <span class="op">&gt;=</span><span class="st"> </span><span class="fl">0.25</span> <span class="op">*</span><span class="st"> </span>sales_expected )
deviations
<span class="co">#&gt;      region   month sales_amt sales_expected</span>
<span class="co">#&gt; 1 Northeast October      3144           5000</span>
<span class="co">#&gt; 2 Southwest October      7442           4000</span></code></pre></div>
<p>Using <code><a href="https://purrr.tidyverse.org/reference/map2.html">purrr::pmap_chr()</a></code>, it is easily to automatically post these issues to a GitHub repository. The result returned is the number of the GitHub issues posted.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># create custom function to convert dataframe to human-readable issue elements</span>

post_kpis &lt;-<span class="st"> </span><span class="cf">function</span>(ref, region, month, sales_amt, sales_expected){
  
  <span class="kw"><a href="../reference/post_issue.html">post_issue</a></span>(ref,
                    <span class="dt">title =</span> <span class="kw">paste</span>(region, 
                                  <span class="kw">ifelse</span>(sales_amt <span class="op">&lt;</span><span class="st"> </span>sales_expected, <span class="st">"below"</span>, <span class="st">"above"</span>), 
                                  <span class="st">"sales expectations in"</span>, 
                                  month),
                    <span class="dt">body =</span> <span class="kw">paste</span>(
                      <span class="st">"**Region**: "</span>, region, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>,
                      <span class="st">"**Month**: "</span>, month, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>,
                      <span class="st">"**Actual**: "</span>, sales_amt, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>,
                      <span class="st">"**Expected**: "</span>, sales_expected, <span class="st">"</span><span class="ch">\n</span><span class="st">"</span>
                    ), 
                    <span class="dt">labels =</span> <span class="kw">c</span>(
                      <span class="kw">paste0</span>(<span class="st">"region:"</span>,region),
                      <span class="kw">paste0</span>(<span class="st">"month:"</span>,month),
                      <span class="kw">paste0</span>(<span class="st">"dir:"</span>, <span class="kw">ifelse</span>(sales_amt <span class="op">&lt;</span><span class="st"> </span>sales_expected, <span class="st">"below"</span>, <span class="st">"above"</span>))
                    )
  )
  
}

<span class="co"># post as issues on GitHub </span>
experigit &lt;-<span class="st"> </span><span class="kw"><a href="../reference/create_repo_ref.html">create_repo_ref</a></span>(<span class="st">'emilyriederer'</span>, <span class="st">'experigit'</span>)
<span class="kw">pmap_chr</span>(deviations, post_kpis, <span class="dt">ref =</span> experigit)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#&gt; [1] 158 159</span></code></pre></div>
<p>Results then appear as normal GitHub issues with whatever title, body, labels, or assignees you chose to specify. From here, various parties can discuss next steps in the comments, include in milestones, and ultimate seek to resolve the issue.</p>
<div class="figure">
<img src="post_kpi.PNG" alt="Issue created from out-of-bounds metric"><p class="caption">Issue created from out-of-bounds metric</p>
</div>
</div>
<div id="a-more-complicated-example" class="section level2">
<h2 class="hasAnchor">
<a href="#a-more-complicated-example" class="anchor"></a>A more complicated example</h2>
<p>The same approach holds up to more complex dataframes comparing more metrics. Suppose all of your expectations are contained in a “shadow matrix”, similar to the treatment of missing data described in the <a href="https://arxiv.org/abs/1809.02264"><code>naniar</code> paper</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(performance_data)
<span class="co">#&gt;      region   month sales_actual returns_actual visitors_actual</span>
<span class="co">#&gt; 1 Northeast October         3023            310              64</span>
<span class="co">#&gt; 2 Southeast October         5264            505             101</span>
<span class="co">#&gt; 3   Midwest October         4446            407              80</span>
<span class="co">#&gt; 4 Southwest October         7276            706             142</span>
<span class="co">#&gt; 5 Northwest October         2228            201              45</span>
<span class="co">#&gt;   sales_expected returns_expected visitors_expected</span>
<span class="co">#&gt; 1           5000              300                60</span>
<span class="co">#&gt; 2           5000              200               100</span>
<span class="co">#&gt; 3           4000              400               160</span>
<span class="co">#&gt; 4           4000              700               140</span>
<span class="co">#&gt; 5           2000              200                40</span></code></pre></div>
<p>With a bit of data wrangling with <code>tidyr</code>, we can make one unique record per region, month, and metric.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">performance_pivoted &lt;-
<span class="st">  </span>performance_data <span class="op">%&gt;%</span>
<span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span>(metric, value, <span class="op">-</span>region, <span class="op">-</span>month) <span class="op">%&gt;%</span>
<span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span>(metric, <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">'metric'</span>, <span class="st">'type'</span>), <span class="dt">sep =</span> <span class="st">"_"</span>) <span class="op">%&gt;%</span>
<span class="st">  </span>tidyr<span class="op">::</span><span class="kw"><a href="https://tidyr.tidyverse.org/reference/spread.html">spread</a></span>(type, value)

<span class="kw">print</span>(performance_pivoted)
<span class="co">#&gt;       region   month   metric actual expected</span>
<span class="co">#&gt; 1    Midwest October  returns    407      400</span>
<span class="co">#&gt; 2    Midwest October    sales   4446     4000</span>
<span class="co">#&gt; 3    Midwest October visitors     80      160</span>
<span class="co">#&gt; 4  Northeast October  returns    310      300</span>
<span class="co">#&gt; 5  Northeast October    sales   3023     5000</span>
<span class="co">#&gt; 6  Northeast October visitors     64       60</span>
<span class="co">#&gt; 7  Northwest October  returns    201      200</span>
<span class="co">#&gt; 8  Northwest October    sales   2228     2000</span>
<span class="co">#&gt; 9  Northwest October visitors     45       40</span>
<span class="co">#&gt; 10 Southeast October  returns    505      200</span>
<span class="co">#&gt; 11 Southeast October    sales   5264     5000</span>
<span class="co">#&gt; 12 Southeast October visitors    101      100</span>
<span class="co">#&gt; 13 Southwest October  returns    706      700</span>
<span class="co">#&gt; 14 Southwest October    sales   7276     4000</span>
<span class="co">#&gt; 15 Southwest October visitors    142      140</span></code></pre></div>
<p>After that, the process of identifying deviations and posting these to a repository is the same as above.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#tracking-kpis">Tracking KPIs</a></li>
      <li><a href="#a-more-complicated-example">A more complicated example</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Emily Riederer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
